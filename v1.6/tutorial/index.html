<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · TSCSMethods.jl</title><meta name="title" content="Tutorial · TSCSMethods.jl"/><meta property="og:title" content="Tutorial · TSCSMethods.jl"/><meta property="twitter:title" content="Tutorial · TSCSMethods.jl"/><meta name="description" content="Documentation for TSCSMethods.jl."/><meta property="og:description" content="Documentation for TSCSMethods.jl."/><meta property="twitter:description" content="Documentation for TSCSMethods.jl."/><meta property="og:url" content="https://human-nature-lab.github.io/TSCSMethods.jl/tutorial/"/><meta property="twitter:url" content="https://human-nature-lab.github.io/TSCSMethods.jl/tutorial/"/><link rel="canonical" href="https://human-nature-lab.github.io/TSCSMethods.jl/tutorial/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TSCSMethods.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Understanding-the-Data-Structure"><span>Understanding the Data Structure</span></a></li><li><a class="tocitem" href="#Step-1:-Model-Creation"><span>Step 1: Model Creation</span></a></li><li><a class="tocitem" href="#Step-2:-Matching"><span>Step 2: Matching</span></a></li><li><a class="tocitem" href="#Step-3:-Balancing"><span>Step 3: Balancing</span></a></li><li><a class="tocitem" href="#Step-4:-Estimation"><span>Step 4: Estimation</span></a></li><li><a class="tocitem" href="#Interpreting-Results"><span>Interpreting Results</span></a></li><li><a class="tocitem" href="#Complete-Example"><span>Complete Example</span></a></li></ul></li><li><a class="tocitem" href="../methodology/">Methodology</a></li><li><a class="tocitem" href="../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/human-nature-lab/TSCSMethods.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/main/docs/src/tutorial.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>This tutorial walks through a complete analysis using TSCSMethods.jl, explaining each step in detail.</p><h2 id="Understanding-the-Data-Structure"><a class="docs-heading-anchor" href="#Understanding-the-Data-Structure">Understanding the Data Structure</a><a id="Understanding-the-Data-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-the-Data-Structure" title="Permalink"></a></h2><p>TSCSMethods expects <strong>staggered treatment design</strong> data where:</p><ul><li><strong>Units</strong> (e.g., counties, countries) are treated at specific times</li><li><strong>Treatment</strong> is binary (0/1) and occurs on specific dates, not continuously</li><li><strong>Time periods</strong> are relative to treatment: negative for pre-treatment, positive for post-treatment</li></ul><h3 id="Example-Data-Format"><a class="docs-heading-anchor" href="#Example-Data-Format">Example Data Format</a><a id="Example-Data-Format-1"></a><a class="docs-heading-anchor-permalink" href="#Example-Data-Format" title="Permalink"></a></h3><pre><code class="language-julia hljs">using TSCSMethods, DataFrames

# Generate example data
dat = example_data(n_units=20, n_days=50, seed=123)
first(dat, 10)</code></pre><p>Key columns:</p><ul><li><code>fips</code>: Unit identifier</li><li><code>day</code>: Time period (0-based)  </li><li><code>gub</code>: Treatment indicator (1 only on treatment day)</li><li><code>death_rte</code>: Outcome variable</li><li><code>pop_dens</code>: Covariate</li></ul><h2 id="Step-1:-Model-Creation"><a class="docs-heading-anchor" href="#Step-1:-Model-Creation">Step 1: Model Creation</a><a id="Step-1:-Model-Creation-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-Model-Creation" title="Permalink"></a></h2><p>The <code>makemodel</code> function sets up your causal inference model:</p><pre><code class="language-julia hljs">model = makemodel(
    dat,              # Your data
    :day,             # Time variable
    :fips,            # Unit identifier  
    :gub,             # Treatment variable
    :death_rte,       # Outcome variable
    [:pop_dens],      # Covariates for matching
    Dict(:pop_dens =&gt; false),  # Which covariates are time-varying
    5:10,             # F: Post-treatment periods to estimate
    -15:-10           # L: Pre-treatment periods for matching
)</code></pre><h3 id="Key-Parameters-Explained"><a class="docs-heading-anchor" href="#Key-Parameters-Explained">Key Parameters Explained</a><a id="Key-Parameters-Explained-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Parameters-Explained" title="Permalink"></a></h3><ul><li><strong>F periods</strong> (<code>5:10</code>): How many periods after treatment to estimate effects</li><li><strong>L periods</strong> (<code>-15:-10</code>): Which pre-treatment periods to use for matching<ul><li><strong>Must be negative</strong> for pre-treatment</li><li>Used to find similar control units</li></ul></li><li><strong>Time-varying covariates</strong>: Set <code>true</code> if covariate changes over time</li></ul><h2 id="Step-2:-Matching"><a class="docs-heading-anchor" href="#Step-2:-Matching">Step 2: Matching</a><a id="Step-2:-Matching-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Matching" title="Permalink"></a></h2><p>Find control units similar to treated units in pre-treatment periods:</p><pre><code class="language-julia hljs">match!(model, dat)

# Check how many matches were found
println(&quot;Found matches for $(length(model.matches)) treated observations&quot;)</code></pre><p>The matching algorithm:</p><ol><li>Identifies treated units and their treatment times</li><li>Finds control units with similar covariate values in pre-treatment periods</li><li>Creates matched sets for each treated observation</li></ol><h2 id="Step-3:-Balancing"><a class="docs-heading-anchor" href="#Step-3:-Balancing">Step 3: Balancing</a><a id="Step-3:-Balancing-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3:-Balancing" title="Permalink"></a></h2><p>Assess how well matching achieved covariate balance:</p><pre><code class="language-julia hljs">balance!(model, dat)

# Check balance results
model.meanbalances</code></pre><p>Good balance means treated and control groups have similar covariate distributions in pre-treatment periods.</p><h2 id="Step-4:-Estimation"><a class="docs-heading-anchor" href="#Step-4:-Estimation">Step 4: Estimation</a><a id="Step-4:-Estimation-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4:-Estimation" title="Permalink"></a></h2><p>Estimate average treatment effects with bootstrap inference:</p><pre><code class="language-julia hljs"># Run estimation (without Bayesian factors for simplicity)
estimate!(model, dat; dobayesfactor=false)

# View results
model.results</code></pre><p>Results include:</p><ul><li><code>f</code>: Time periods relative to treatment</li><li><code>att</code>: Average treatment effect estimates</li><li><code>q025</code>, <code>q975</code>: 95% confidence intervals</li><li><code>treated</code>: Number of treated units</li><li><code>matches</code>: Number of control units matched</li></ul><h2 id="Interpreting-Results"><a class="docs-heading-anchor" href="#Interpreting-Results">Interpreting Results</a><a id="Interpreting-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Interpreting-Results" title="Permalink"></a></h2><pre><code class="language-julia hljs"># Look at results
println(&quot;Treatment Effects by Time Period:&quot;)
select(model.results, :f, :att, :q025, :q975)</code></pre><ul><li><strong>Positive ATT</strong>: Treatment increased the outcome</li><li><strong>Negative ATT</strong>: Treatment decreased the outcome  </li><li><strong>Confidence intervals</strong>: Statistical uncertainty around estimates</li><li><strong>Multiple time periods</strong>: See how effects evolve over time</li></ul><h2 id="Complete-Example"><a class="docs-heading-anchor" href="#Complete-Example">Complete Example</a><a id="Complete-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Complete-Example" title="Permalink"></a></h2><pre><code class="language-julia hljs">using TSCSMethods, DataFrames

# 1. Load/generate data
dat = example_data(n_units=30, n_days=60, seed=42)

# 2. Create model  
model = makemodel(dat, :day, :fips, :gub, :death_rte, 
                 [:pop_dens], Dict(:pop_dens =&gt; false),
                 3:8, -20:-10)

# 3. Run complete workflow
match!(model, dat)
balance!(model, dat) 
estimate!(model, dat; dobayesfactor=false)

# 4. Examine results
println(&quot;Number of treated observations: &quot;, model.treatednum)
println(&quot;Average treatment effect in period 3: &quot;, model.results[1, :att])</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../methodology/">Methodology »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 20 August 2025 21:30">Wednesday 20 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
