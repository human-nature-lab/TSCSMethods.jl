<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · TSCSMethods.jl</title><meta name="title" content="API Reference · TSCSMethods.jl"/><meta property="og:title" content="API Reference · TSCSMethods.jl"/><meta property="twitter:title" content="API Reference · TSCSMethods.jl"/><meta name="description" content="Documentation for TSCSMethods.jl."/><meta property="og:description" content="Documentation for TSCSMethods.jl."/><meta property="twitter:description" content="Documentation for TSCSMethods.jl."/><meta property="og:url" content="https://human-nature-lab.github.io/TSCSMethods.jl/api/"/><meta property="twitter:url" content="https://human-nature-lab.github.io/TSCSMethods.jl/api/"/><link rel="canonical" href="https://human-nature-lab.github.io/TSCSMethods.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TSCSMethods.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../methodology/">Methodology</a></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Complete-Function-and-Type-Reference"><span>Complete Function and Type Reference</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/human-nature-lab/TSCSMethods.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><p>This page provides comprehensive documentation for all TSCSMethods.jl functions and types.</p><h2 id="Complete-Function-and-Type-Reference"><a class="docs-heading-anchor" href="#Complete-Function-and-Type-Reference">Complete Function and Type Reference</a><a id="Complete-Function-and-Type-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Complete-Function-and-Type-Reference" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.CIC" href="#TSCSMethods.CIC"><code>TSCSMethods.CIC</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CIC &lt;: AbstractCICModel</code></pre><p>Main model type for causal inference with time-series cross-sectional data.</p><p>Contains all information needed for matching, balancing, and estimation in TSCS designs. Created by <code>makemodel()</code> and used throughout the analysis workflow.</p><p><strong>Fields</strong></p><ul><li><code>title::String</code>: Model title for identification</li><li><code>id::Symbol</code>: Column name for unit identifier </li><li><code>t::Symbol</code>: Column name for time variable</li><li><code>outcome::Union{Symbol,Vector{Symbol}}</code>: Outcome variable(s)</li><li><code>treatment::Symbol</code>: Treatment variable (binary 0/1)</li><li><code>covariates::Vector{Symbol}</code>: Covariates used for matching</li><li><code>timevary::Dict{Symbol, Bool}</code>: Whether each covariate is time-varying</li><li><code>reference::Int</code>: Reference time period (default: -1)</li><li><code>F::UnitRange{Int}</code>: Post-treatment periods for estimation</li><li><code>L::UnitRange{Int}</code>: Pre-treatment periods for matching (negative values)</li><li><code>observations::Vector{Tuple{Int, Int}}</code>: Treated observations (time, unit)</li><li><code>ids::Vector{Int}</code>: All unit identifiers</li><li><code>matches::Vector{Tob}</code>: Matching results for each treated observation</li><li><code>meanbalances::DataFrame</code>: Covariate balance statistics</li><li><code>grandbalances::Dict</code>: Overall balance measures</li><li><code>iterations::Int</code>: Bootstrap iterations (default: 500)</li><li><code>results::DataFrame</code>: Treatment effect estimates</li><li><code>treatednum::Int</code>: Number of treated observations</li><li><code>estimator::String</code>: Estimator type (default: &quot;ATT&quot;)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using TSCSMethods, DataFrames

data = example_data()
model = makemodel(data, :day, :fips, :gub, :death_rte, 
                 [:pop_dens], Dict(:pop_dens =&gt; false),
                 1:5, -10:-1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/types.jl#L36-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.CICStratified" href="#TSCSMethods.CICStratified"><code>TSCSMethods.CICStratified</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CICStratified &lt;: AbstractCICModelStratified</code></pre><p>Stratified model type for causal inference with time-series cross-sectional data.</p><p>Extends the basic CIC model to handle stratified analysis where matching and estimation are performed separately within subgroups defined by a stratifying variable.</p><p><strong>Fields</strong></p><ul><li><code>title::String</code>: Model title for identification</li><li><code>id::Symbol</code>: Column name for unit identifier</li><li><code>t::Symbol</code>: Column name for time variable  </li><li><code>outcome::Union{Symbol,Vector{Symbol}}</code>: Outcome variable(s)</li><li><code>treatment::Symbol</code>: Treatment variable (binary 0/1)</li><li><code>covariates::Vector{Symbol}</code>: Covariates used for matching</li><li><code>timevary::Dict{Symbol, Bool}</code>: Whether each covariate is time-varying</li><li><code>stratifier::Symbol</code>: Variable used for stratification</li><li><code>strata::Vector{Int}</code>: Values of stratifying variable</li><li><code>reference::Int</code>: Reference time period (default: -1)  </li><li><code>F::UnitRange{Int}</code>: Post-treatment periods for estimation</li><li><code>L::UnitRange{Int}</code>: Pre-treatment periods for matching (negative values)</li><li><code>observations::Vector{Tuple{Int, Int}}</code>: Treated observations (time, unit)</li><li><code>ids::Vector{Int}</code>: All unit identifiers</li><li><code>matches::Vector{Tob}</code>: Matching results for each treated observation</li><li><code>meanbalances::DataFrame</code>: Covariate balance statistics by stratum</li><li><code>grandbalances::Dict</code>: Overall balance measures by stratum</li><li><code>iterations::Int</code>: Bootstrap iterations (default: 500)</li><li><code>results::DataFrame</code>: Treatment effect estimates by stratum</li><li><code>treatednum::Dict{Int64, Int64}</code>: Number of treated observations per stratum</li><li><code>estimator::String</code>: Estimator type (default: &quot;ATT&quot;)</li><li><code>labels::Dict{Int64, String}</code>: Human-readable labels for strata</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Create stratified model
model = makemodel(data, :day, :fips, :gub, :death_rte,
                 [:pop_dens], Dict(:pop_dens =&gt; false),
                 1:5, -10:-1)
strat_model = stratify(model, data, :region)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/types.jl#L98-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.Fblock" href="#TSCSMethods.Fblock"><code>TSCSMethods.Fblock</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    Fblock</code></pre><p>Holds the relevant information for bootstrapping and estimation, for a specific f in the outcome window (an f in a stratum when the model is stratified).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/types.jl#L345-L351">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods._estimate!-Tuple{Any, Any, Any, Vector{Symbol}, Vararg{Any, 8}}" href="#TSCSMethods._estimate!-Tuple{Any, Any, Any, Vector{Symbol}, Vararg{Any, 8}}"><code>TSCSMethods._estimate!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>version for multiple outcomes</p><p>does not include p-values, bayesfactor</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation.jl#L131-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods._makegroupindices-NTuple{13, Any}" href="#TSCSMethods._makegroupindices-NTuple{13, Any}"><code>TSCSMethods._makegroupindices</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>version with exposure</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/groupindices.jl#L82-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.alldistances!-NTuple{5, Any}" href="#TSCSMethods.alldistances!-NTuple{5, Any}"><code>TSCSMethods.alldistances!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>N.B. if any of the input xr or yr (the covariate values for the treated and match at some day in the covariate matching window) are missing, then the  maha distance is missing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/distancing.jl#L198-L201">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.allocate_meanbalances!-Tuple{Any}" href="#TSCSMethods.allocate_meanbalances!-Tuple{Any}"><code>TSCSMethods.allocate_meanbalances!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">allocate_meanbalances!(model)</code></pre><p>Prepare the meanbalances DataFrame for a model. Meanbalances has number of rows == observations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/balancing_utilities.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.att!-Tuple{Any, Any, Any}" href="#TSCSMethods.att!-Tuple{Any, Any, Any}"><code>TSCSMethods.att!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    att!(atts, tcounts, fblocks)</code></pre><p>Calculate the att for each f, for a the set of treated units and matches contained in the fblocks.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_utilities.jl#L5-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.autobalance-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}" href="#TSCSMethods.autobalance-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>TSCSMethods.autobalance</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">autobalance(
  model, dat;
  refinementnum = 5,
  calmin = 0.08, step = 0.05,
  initial_bals = nothing
)</code></pre><p>Automatically balance via a simple algorithm. Start with initial caliper of 1.0, and subtract <code>step</code> whenever the grand mean balance threshold (0.1) is not met.</p><p>initial_bals is specified, work downward from the initial specified caliper for one or more selected variables. Unspecified variables start at a caliper of 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/autobalancing.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.balance!-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}" href="#TSCSMethods.balance!-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>TSCSMethods.balance!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">balance!(model::VeryAbstractCICModel, dat::DataFrame) -&gt; VeryAbstractCICModel</code></pre><p>Perform covariate balancing on a matched model to ensure treated and control units are comparable on observed characteristics.</p><p><strong>Arguments</strong></p><ul><li><code>model::VeryAbstractCICModel</code>: A CIC model that has been matched (using <code>match!</code>)</li><li><code>dat::DataFrame</code>: Input data containing all model variables</li></ul><p><strong>Returns</strong></p><ul><li>The input model with updated balance statistics</li></ul><p><strong>Description</strong></p><p>This function performs two types of balancing:</p><ol><li>Mean balancing: Computes balance statistics for each covariate across treatment periods</li><li>Grand balancing: Aggregates balance statistics across the entire model</li></ol><p>Balancing assesses how well the matching procedure achieved covariate balance between treated and control groups. Poor balance may indicate the need for refinement via calipers or other restrictions.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If input data is empty</li><li><code>ErrorException</code>: If balance calculations fail</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># After constructing and matching a model
model = makemodel(data, :time, :id, :treatment, :outcome, 
                 [:covar1, :covar2], timevary_dict, F_periods, L_periods)
match!(model, data)

# Perform balancing
balance!(model, data)

# Check balance results
checkbalances(model, data)</code></pre><p><strong>See Also</strong></p><ul><li><a href="#TSCSMethods.checkbalances-Tuple{AbstractCICModel}"><code>checkbalances</code></a>: Assess balance quality</li><li><a href="#TSCSMethods.autobalance-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>autobalance</code></a>: Automatic balance improvement</li><li><a href="#TSCSMethods.match!-Tuple{AbstractCICModel, DataFrames.DataFrame}"><code>match!</code></a>: Matching procedure that should precede balancing</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/balancing.jl#L3-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.bootinfo!-Tuple{Any, Any, Any}" href="#TSCSMethods.bootinfo!-Tuple{Any, Any, Any}"><code>TSCSMethods.bootinfo!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bootinfo!(res, oc, boots; qtiles = [0.025, 0.5, 0.975])</code></pre><p>Format the bootstrap matrix into the results dataframe. Assumes that att() has already been added to res.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_utilities.jl#L66-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.bootinfo!-Tuple{Any, Any}" href="#TSCSMethods.bootinfo!-Tuple{Any, Any}"><code>TSCSMethods.bootinfo!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bootinfo!(res, boots; qtiles = [0.025, 0.5, 0.975])</code></pre><p>Format the bootstrap matrix into the results dataframe. Assumes that att() has already been added to res.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_utilities.jl#L42-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.bootstrap!-NTuple{6, Any}" href="#TSCSMethods.bootstrap!-NTuple{6, Any}"><code>TSCSMethods.bootstrap!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    bootstrap!(boots, tcountmat, fblocks, ids, treatdex, iterations)</code></pre><p>Perform bootstrapping of the att for each f in the outcome window. Does so for the given set of treated units and matches contained in the fblocks.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/bootstrapping.jl#L9-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.calculate_sample_Σs!-Tuple{Any, Any, Any, Any, Bool}" href="#TSCSMethods.calculate_sample_Σs!-Tuple{Any, Any, Any, Any, Bool}"><code>TSCSMethods.calculate_sample_Σs!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>inverted covariance matrix for mahalanobis distance (all units at t)</p><p>inverted sqrt(vars) for balance score calculations (treated units at t)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/distancing_utilities.jl#L42-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.caliper-Tuple{CIC, Any, Any}" href="#TSCSMethods.caliper-Tuple{CIC, Any, Any}"><code>TSCSMethods.caliper</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">caliper(
    model::CIC, 
    acaliper::Dict{Symbol, Float64}, 
    dat::DataFrame; 
    dobalance::Bool = true
) -&gt; CaliperCIC</code></pre><p>Apply caliper restrictions to a CIC model by excluding matches beyond specified distance thresholds.</p><p><strong>Arguments</strong></p><ul><li><code>model::CIC</code>: A matched CIC model</li><li><code>acaliper::Dict{Symbol, Float64}</code>: Dictionary mapping covariates to maximum allowed distances</li><li><code>dat::DataFrame</code>: Input data containing all model variables</li><li><code>dobalance::Bool</code>: Whether to perform balancing on the calipered model (default: true)</li></ul><p><strong>Returns</strong></p><ul><li><code>CaliperCIC</code>: A calipered version of the input model with restricted matches</li></ul><p><strong>Description</strong></p><p>Caliper restrictions improve match quality by excluding matches where the distance on specified covariates exceeds the given thresholds. This helps ensure that matched units are similar on the most important dimensions, potentially improving balance and reducing bias.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># After matching a model
model = makemodel(data, :time, :id, :treatment, :outcome, covariates, timevary, F, L)
match!(model, data)

# Apply calipers - exclude matches with distance &gt; 0.25 on covar1 or &gt; 0.5 on covar2
caliper_specs = Dict(:covar1 =&gt; 0.25, :covar2 =&gt; 0.5)
calipered_model = caliper(model, caliper_specs, data)

# Apply calipers without automatic balancing
calipered_model = caliper(model, caliper_specs, data; dobalance = false)</code></pre><p><strong>Notes</strong></p><ul><li>Stricter calipers improve match quality but reduce the number of matches</li><li>Use <a href="#TSCSMethods.autobalance-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>autobalance</code></a> to automatically determine appropriate caliper values</li></ul><p><strong>See Also</strong></p><ul><li><a href="#TSCSMethods.refine-Tuple{CIC, Any}"><code>refine</code></a>: Alternative approach using match ranking</li><li><a href="#TSCSMethods.autobalance-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>autobalance</code></a>: Automatic caliper selection</li><li><a href="#TSCSMethods.match!-Tuple{AbstractCICModel, DataFrames.DataFrame}"><code>match!</code></a>: Initial matching procedure</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/caliper.jl#L5-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.checkbalances-Tuple{AbstractCICModel}" href="#TSCSMethods.checkbalances-Tuple{AbstractCICModel}"><code>TSCSMethods.checkbalances</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">checkbalances(
  m::Dict{Symbol, Union{Float64, Vector{Float64}}};
  threshold = 0.1, stratareduce = true
)</code></pre><p>Simply check whether the grand means are above the std. balance threshold. Returns a Bool for each covariate. If Stratareduce is true, then the strata balances will be agggregated to the covariate level, such that a violation in any caliper triggers a violation in the aggregated output.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/autobalancing.jl#L155-L163">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.checksample-Tuple{Any, Any}" href="#TSCSMethods.checksample-Tuple{Any, Any}"><code>TSCSMethods.checksample</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>not stratified</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/resampling.jl#L60-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.combostrat-Tuple{Any, Vector{Symbol}, Any}" href="#TSCSMethods.combostrat-Tuple{Any, Vector{Symbol}, Any}"><code>TSCSMethods.combostrat</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">combostrat(model, dat, vars::Vector{Symbol}; varslabs = nothing)</code></pre><p>Stratify based on the combinations of one or more variables that exist in the data. Strata are formed directly from the variable values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/stratification.jl#L209-L213">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.countmemb-Tuple{Any, Int64}" href="#TSCSMethods.countmemb-Tuple{Any, Int64}"><code>TSCSMethods.countmemb</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>faster version of countmap, use when length is known</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/resampling.jl#L3-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.customstrat-Tuple{Any, Any, Dict{Tuple{Int64, Int64}, Int64}}" href="#TSCSMethods.customstrat-Tuple{Any, Any, Dict{Tuple{Int64, Int64}, Int64}}"><code>TSCSMethods.customstrat</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">customstrat!(
  cc,
  stratdict::Union{Dict{Tuple{Int64, Int64}, Int64}, Dict{Int64, Int64}}
)</code></pre><p>Stratify based on the values of some input dictionary, specifying strata for each (t, id) or each (id) for a stratification that varies only by unit.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/stratification.jl#L68-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.default_treatmentcategories-Tuple{Any}" href="#TSCSMethods.default_treatmentcategories-Tuple{Any}"><code>TSCSMethods.default_treatmentcategories</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">default_treatmentcategories(x)</code></pre><p>(For use as input to match!) Default treatment history categories. We look at total count in the pre-treatment crossover period for both the treated unit and its (potential) match. If the totals, for each, in the same period fall into the same cateory, we allow the match.</p><p>Here the categories are either not treated, or treated. Ths works for single treatments, and prevents matches from being treated at all during the pretreatment crossover window.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/match!.jl#L3-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.economic_data-Tuple{}" href="#TSCSMethods.economic_data-Tuple{}"><code>TSCSMethods.economic_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">economic_data(; n_units = 40, n_days = 90, seed = 789)</code></pre><p>Generate synthetic economic shock dataset for demonstration.</p><p><strong>Arguments</strong></p><ul><li><code>n_units::Int</code>: Number of units (countries/regions) to generate (default: 40)</li><li><code>n_days::Int</code>: Number of time periods to generate (default: 90)</li><li><code>seed::Int</code>: Random seed for reproducibility (default: 789)</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: Synthetic panel data with economic shock theme</li></ul><p><strong>Description</strong></p><p>Simulates an economic analysis where units experience economic shocks (e.g., natural disasters, financial crises) at different times. Includes realistic economic indicators and shock effects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/TSCSMethods.jl#L202-L218">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.eligibility-Tuple{Any}" href="#TSCSMethods.eligibility-Tuple{Any}"><code>TSCSMethods.eligibility</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">eligibility(model)</code></pre><p>&quot;eligibility&quot; for units, over all treated units =&gt; num. times a particular unit is eligible to be a match, for each F in the outcome window.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/information.jl#L68-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.estimate!-Tuple{AbstractCICModel, DataFrames.DataFrame}" href="#TSCSMethods.estimate!-Tuple{AbstractCICModel, DataFrames.DataFrame}"><code>TSCSMethods.estimate!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">estimate!(
    ccr::AbstractCICModel, dat;
    iterations = nothing,
    percentiles = [0.025, 0.5, 0.975],
    overallestimate = false,
    bayesfactor = true
)</code></pre><p>Perform ATT estimation, with bootstrapped CIs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation.jl#L3-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.estimate!-Tuple{AbstractCICModelStratified, Any}" href="#TSCSMethods.estimate!-Tuple{AbstractCICModelStratified, Any}"><code>TSCSMethods.estimate!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">estimate!(ccr::AbstractCICModelStratified, dat; iterations = nothing)</code></pre><p>Perform ATT stratified estimation, with bootstrapped CIs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_stratified.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.example_data-Tuple{}" href="#TSCSMethods.example_data-Tuple{}"><code>TSCSMethods.example_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">example_data(; n_units = 100, n_days = 90, seed = 123)</code></pre><p>Generate synthetic example data for testing and demonstration purposes.</p><p><strong>Arguments</strong></p><ul><li><code>n_units::Int</code>: Number of units (counties/regions) to generate (default: 100)</li><li><code>n_days::Int</code>: Number of time periods to generate (default: 90)</li><li><code>seed::Int</code>: Random seed for reproducibility (default: 123)</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: Synthetic panel data with columns: date, fips, pop<em>dens, cumul</em>death<em>rate, death</em>rte, gub, day</li></ul><p><strong>Description</strong></p><p>Creates synthetic panel data mimicking the structure used in Feltham et al. (2023):</p><ul><li>Units represent counties with FIPS codes</li><li>Treatment (gubernatorial elections) affects first 20% of units</li><li>Realistic population density and outcome variables with trends</li><li>Includes both time-invariant (pop<em>dens) and time-varying (cumul</em>death_rate) covariates</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/TSCSMethods.jl#L46-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.executesample!-Tuple{Any, Any, Any}" href="#TSCSMethods.executesample!-Tuple{Any, Any, Any}"><code>TSCSMethods.executesample!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>not stratified</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/resampling.jl#L46-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.filterunits!-Tuple{Any, Any}" href="#TSCSMethods.filterunits!-Tuple{Any, Any}"><code>TSCSMethods.filterunits!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>filterunits!(m, omap)</p><p>Remove treated units and matches that do not have values defined in the outcome window. This could be modified to account for missingness easily. This should probably be integrated into the match! procedure. (keep separate for now). (Updates ranks as well.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/filterunits!.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.fpossible!-NTuple{7, Any}" href="#TSCSMethods.fpossible!-NTuple{7, Any}"><code>TSCSMethods.fpossible!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>check possibility of the match for each f</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/getmatches!.jl#L82-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.fpossible!-NTuple{9, Any}" href="#TSCSMethods.fpossible!-NTuple{9, Any}"><code>TSCSMethods.fpossible!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>check possibility of the match for each f</p><p>version with exposure</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/getmatches!.jl#L126-L130">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.fpossible_mis!-NTuple{11, Any}" href="#TSCSMethods.fpossible_mis!-NTuple{11, Any}"><code>TSCSMethods.fpossible_mis!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>check possibility of the match for each f</p><p>version with exposure</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/getmatches!_missing.jl#L188-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.fpossible_mis!-NTuple{9, Any}" href="#TSCSMethods.fpossible_mis!-NTuple{9, Any}"><code>TSCSMethods.fpossible_mis!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>check possibility of the match for each f</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/getmatches!_missing.jl#L133-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.getoutcomemap-NTuple{4, Any}" href="#TSCSMethods.getoutcomemap-NTuple{4, Any}"><code>TSCSMethods.getoutcomemap</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    getoutcomemap(outcome, dat, t, id)</code></pre><p>Get dictionary, from specified unit and time to outcome.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_setup.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.getsample-Tuple{Any, Any}" href="#TSCSMethods.getsample-Tuple{Any, Any}"><code>TSCSMethods.getsample</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>not stratified</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/resampling.jl#L36-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.grandbalance!-Tuple{AbstractCICModelStratified}" href="#TSCSMethods.grandbalance!-Tuple{AbstractCICModelStratified}"><code>TSCSMethods.grandbalance!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">grandbalance!(model::AbstractCICModelStratified)</code></pre><p>Calculate the overall mean covariate balance for a model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/overallbalancing.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.grandbalance!-Tuple{AbstractCICModel}" href="#TSCSMethods.grandbalance!-Tuple{AbstractCICModel}"><code>TSCSMethods.grandbalance!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">grandbalance!(model::AbstractCICModel)</code></pre><p>Calculate the overall mean covariate balance for a model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/overallbalancing.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.impute_results-NTuple{4, Any}" href="#TSCSMethods.impute_results-NTuple{4, Any}"><code>TSCSMethods.impute_results</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Impute Y(0).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/imputation.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.make_groupindices-NTuple{7, Any}" href="#TSCSMethods.make_groupindices-NTuple{7, Any}"><code>TSCSMethods.make_groupindices</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_groupindices(tvec, treatvec, idvec, uid, fmax, Lmin, cdat)</code></pre><p>Get partially overlapping values for treated observations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/groupindices.jl#L12-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.makefblocks-NTuple{5, Any}" href="#TSCSMethods.makefblocks-NTuple{5, Any}"><code>TSCSMethods.makefblocks</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    makefblocks(subTus, subMus, subWos, subWrs, subFs)</code></pre><p>Populate a set of fblocks to estimate and bootstrap the ATT.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_setup.jl#L144-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.makemodel-Tuple{DataFrames.DataFrame, Symbol, Symbol, Symbol, Union{Symbol, Vector{Symbol}}, Vector{Symbol}, Dict{Symbol, Bool}, UnitRange{Int64}, UnitRange{Int64}}" href="#TSCSMethods.makemodel-Tuple{DataFrames.DataFrame, Symbol, Symbol, Symbol, Union{Symbol, Vector{Symbol}}, Vector{Symbol}, Dict{Symbol, Bool}, UnitRange{Int64}, UnitRange{Int64}}"><code>TSCSMethods.makemodel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">makemodel(
    dat::DataFrame, 
    t::Symbol, 
    id::Symbol, 
    treatment::Symbol, 
    outcome::Union{Symbol, Vector{Symbol}},
    covariates::Vector{Symbol}, 
    timevary::Dict{Symbol, Bool},
    F::UnitRange{Int}, 
    L::UnitRange{Int};
    title::String = &quot;model&quot;,
    estimator::String = &quot;ATT&quot;
) -&gt; CIC</code></pre><p>Construct a CIC (Changes-in-Changes) model for causal inference analysis.</p><p><strong>Arguments</strong></p><ul><li><code>dat::DataFrame</code>: Input data containing all required variables</li><li><code>t::Symbol</code>: Column name for time variable</li><li><code>id::Symbol</code>: Column name for unit identifier</li><li><code>treatment::Symbol</code>: Column name for treatment variable (0/1 coding expected)</li><li><code>outcome::Union{Symbol, Vector{Symbol}}</code>: Column name(s) for outcome variable(s)</li><li><code>covariates::Vector{Symbol}</code>: Vector of column names for matching covariates</li><li><code>timevary::Dict{Symbol, Bool}</code>: Dictionary mapping each covariate to whether it&#39;s time-varying</li><li><code>F::UnitRange{Int}</code>: Time periods for treatment effect estimation (post-treatment)</li><li><code>L::UnitRange{Int}</code>: Time periods for pre-treatment matching window</li><li><code>title::String</code>: Optional title for the model (default: &quot;model&quot;)</li><li><code>estimator::String</code>: Estimator type (default: &quot;ATT&quot; for Average Treatment Effect on Treated)</li></ul><p><strong>Returns</strong></p><ul><li><code>CIC</code>: A constructed CIC model ready for matching, balancing, and estimation</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If input data is empty, required columns are missing, or parameters are invalid</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using TSCSMethods, DataFrames

# Create sample data
data = DataFrame(
    time = repeat(1:100, 50),
    unit_id = repeat(1:50, inner=100),
    treated = repeat([fill(1, 10); fill(0, 40)], inner=100),
    outcome = randn(5000),
    covar1 = randn(5000),
    covar2 = randn(5000)
)

# Construct model
model = makemodel(
    data, :time, :unit_id, :treated, :outcome,
    [:covar1, :covar2],
    Dict(:covar1 =&gt; false, :covar2 =&gt; true),
    51:60, 40:49  # F and L periods
)</code></pre><p><strong>References</strong></p><p>Based on the methodology from Imai, Kim, and Wang (2021) for matching methods  with time-series cross-sectional data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/construction.jl#L3-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.match!-Tuple{AbstractCICModel, DataFrames.DataFrame}" href="#TSCSMethods.match!-Tuple{AbstractCICModel, DataFrames.DataFrame}"><code>TSCSMethods.match!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">match!(
  model::AbstractCICModel, dat::DataFrame;
  treatcat = nothing, exposure = nothing
)</code></pre><p>Perform matching for treatment events, using Mahalanobis distance matching. Additionally, calculate standardized Euclidean distances for the individual covariates are specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/match!.jl#L22-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.meanbalance!-Tuple{VeryAbstractCICModel, Any, Any, Any}" href="#TSCSMethods.meanbalance!-Tuple{VeryAbstractCICModel, Any, Any, Any}"><code>TSCSMethods.meanbalance!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">meanbalance!(model, dat, tg, rg)</code></pre><p>Calculate the mean balances, for each treated observation from the full set of balances. This will limit the calculations to include those present in model.matches, e.g. in case a caliper has been applied.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/meanbalancing.jl#L47-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.meanbalance!-Tuple{VeryAbstractCICModel, Any}" href="#TSCSMethods.meanbalance!-Tuple{VeryAbstractCICModel, Any}"><code>TSCSMethods.meanbalance!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">meanbalance!(model)</code></pre><p>Calculate the mean balances, for each treated observation from the full set of balances. This will limit the calculations to include those present in model.matches, e.g. in case a caliper has been applied.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/meanbalancing.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.name_model-Tuple{VeryAbstractCICModel}" href="#TSCSMethods.name_model-Tuple{VeryAbstractCICModel}"><code>TSCSMethods.name_model</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">name_model(model::VeryAbstractCICModel)</code></pre><p>Generate the filename for a set of models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/storage.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.observationweights-Tuple{Any, Any}" href="#TSCSMethods.observationweights-Tuple{Any, Any}"><code>TSCSMethods.observationweights</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>treated observation weights</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_observationweights.jl#L3-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.obsinfo-Tuple{Any, Any, Any}" href="#TSCSMethods.obsinfo-Tuple{Any, Any, Any}"><code>TSCSMethods.obsinfo</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">obsinfo(
  rcinfo, dat, vars;
  fullmodobs = nothing,
  t = :running, id = :fips
)</code></pre><p>Get the requested info for the treated units. If the var is timevarying, it will get it from the time of the treatment event.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/information.jl#L251-L260">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.policy_data-Tuple{}" href="#TSCSMethods.policy_data-Tuple{}"><code>TSCSMethods.policy_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">policy_data(; n_units = 30, n_days = 120, seed = 456)</code></pre><p>Generate synthetic policy intervention dataset for demonstration.</p><p><strong>Arguments</strong></p><ul><li><code>n_units::Int</code>: Number of units (states/regions) to generate (default: 30)</li><li><code>n_days::Int</code>: Number of time periods to generate (default: 120) </li><li><code>seed::Int</code>: Random seed for reproducibility (default: 456)</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: Synthetic panel data with policy intervention theme</li></ul><p><strong>Description</strong></p><p>Simulates a policy intervention study where different units adopt policies at different times. Includes multiple time-varying covariates and realistic policy effect patterns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/TSCSMethods.jl#L125-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.quick_att-Tuple{Any}" href="#TSCSMethods.quick_att-Tuple{Any}"><code>TSCSMethods.quick_att</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>quick<em>att(matchseries;     outcomes = [:death</em>rte, :case_rte, :deaths, :cases],     F = 10:40,     ttt = false,     tm1 = 30 )</p><p>Quickly calculate the att for specified outcomes based on the output of the  matchprocess(). Does not calculate confidence intervals.</p><p>Calculates both the individual-level unit effects, and the average effects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_utilities.jl#L179-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.refine-Tuple{CIC, Any}" href="#TSCSMethods.refine-Tuple{CIC, Any}"><code>TSCSMethods.refine</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">refine(
    model::CIC, 
    dat::DataFrame;
    refinementnum::Int = 5, 
    dobalance::Bool = true,
    doestimate::Bool = true
) -&gt; RefinedCIC</code></pre><p>Refine a CIC model by keeping only the best <code>refinementnum</code> matches for each treated unit.</p><p><strong>Arguments</strong></p><ul><li><code>model::CIC</code>: A matched CIC model</li><li><code>dat::DataFrame</code>: Input data containing all model variables</li><li><code>refinementnum::Int</code>: Number of best matches to retain per treated unit (default: 5)</li><li><code>dobalance::Bool</code>: Whether to perform balancing on the refined model (default: true)</li><li><code>doestimate::Bool</code>: Whether to perform estimation on the refined model (default: true)</li></ul><p><strong>Returns</strong></p><ul><li><code>RefinedCIC</code>: A refined version of the input model with reduced matches</li></ul><p><strong>Description</strong></p><p>Refinement improves match quality by keeping only the closest matches for each treated unit, based on the distance metrics computed during the matching stage. This typically improves covariate balance and estimation precision at the cost of statistical power.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># After matching a model
model = makemodel(data, :time, :id, :treatment, :outcome, covariates, timevary, F, L)
match!(model, data)

# Refine to top 3 matches per treated unit
refined_model = refine(model, data; refinementnum = 3)

# Refine without automatic balancing and estimation
refined_model = refine(model, data; refinementnum = 5, dobalance = false, doestimate = false)</code></pre><p><strong>See Also</strong></p><ul><li><a href="#TSCSMethods.caliper-Tuple{CIC, Any, Any}"><code>caliper</code></a>: Alternative approach using distance thresholds</li><li><a href="#TSCSMethods.match!-Tuple{AbstractCICModel, DataFrames.DataFrame}"><code>match!</code></a>: Initial matching procedure</li><li><a href="#TSCSMethods.balance!-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>balance!</code></a>: Balance assessment</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/refine.jl#L5-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.showmatches-Tuple{Any, Any}" href="#TSCSMethods.showmatches-Tuple{Any, Any}"><code>TSCSMethods.showmatches</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">showmatches(model, treatob)</code></pre><p>Show the ranked (best to worst) eligible matches to a chosen treated observation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/information.jl#L111-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.std_treated-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}" href="#TSCSMethods.std_treated-Tuple{VeryAbstractCICModel, DataFrames.DataFrame}"><code>TSCSMethods.std_treated</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>gives (1 / (std of treated units)) for each l in the matching period</p><p>outputs dict[t-l, covariate] where t-l is l days prior to the treatment</p><p>(adjust this for f, in sliding window F-defined match period case, which is the case...)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/balancing_utilities.jl#L3-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.stratify-Tuple{Function, CIC, Vararg{Any}}" href="#TSCSMethods.stratify-Tuple{Function, CIC, Vararg{Any}}"><code>TSCSMethods.stratify</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stratify(stratfunc::Function, args...; kwargs...)</code></pre><p>Apply a stratification function, its arguments, to apply the stratification, calculate the stratified grandbalances, the treated observations in each group, and return the updated model with plot labels.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/stratification.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.stratifyinputs-Tuple{Any, Any, Any}" href="#TSCSMethods.stratifyinputs-Tuple{Any, Any, Any}"><code>TSCSMethods.stratifyinputs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">    stratifyinputs(X, s, strata)</code></pre><p>Stratify the output from processunits().</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_setup.jl#L185-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.treatedinfo-Tuple{Any, Any, Any}" href="#TSCSMethods.treatedinfo-Tuple{Any, Any, Any}"><code>TSCSMethods.treatedinfo</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function treatedinfo(
  model, variables, dat;
)</code></pre><p>Gives variable values for treated observations present in the model, for the chosen set of variables. Order is the same as model.observations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/model_utilities.jl#L46-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.treatednums!-Tuple{Any}" href="#TSCSMethods.treatednums!-Tuple{Any}"><code>TSCSMethods.treatednums!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>assign treatment numbers in each category</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/stratification.jl#L57-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.trim_model-Tuple{Any}" href="#TSCSMethods.trim_model-Tuple{Any}"><code>TSCSMethods.trim_model</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trim_model(model)</code></pre><p>Remove treated observations that do not have any valid matches. This copies!</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/get_matches_utilities.jl#L85-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.unitcounts-Tuple{Any}" href="#TSCSMethods.unitcounts-Tuple{Any}"><code>TSCSMethods.unitcounts</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unitcounts(m)</code></pre><p>count the total number of treated and the number of matched units for each F.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/information.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.unitstore!-NTuple{13, Any}" href="#TSCSMethods.unitstore!-NTuple{13, Any}"><code>TSCSMethods.unitstore!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Use the mu matrix to generate vectors of weighted outcomes and unit information, as a preprocessing step for estimation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/estimation_setup.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.variable_filter-Tuple{Any, Any, Any}" href="#TSCSMethods.variable_filter-Tuple{Any, Any, Any}"><code>TSCSMethods.variable_filter</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">variable_filter(
  model, variable, dat;
  mn = nothing, mx = nothing
)</code></pre><p>Remove treated observations according to some variable values. The filtered out treated observations will still left as treated in the data, and will not be allowed to be control units for matching.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/model_utilities.jl#L3-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.variablestrat-Tuple{CIC, Any, Any}" href="#TSCSMethods.variablestrat-Tuple{CIC, Any, Any}"><code>TSCSMethods.variablestrat</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Generic function to stratify on a covariate present in the dataframe.</p><p>Assumes that matching, balancing, and meanbalancing has ocurred.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/stratification.jl#L102-L106">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.whentreated-Tuple{Any, Any}" href="#TSCSMethods.whentreated-Tuple{Any, Any}"><code>TSCSMethods.whentreated</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">whentreated(fips, model)</code></pre><p>Input a unit id, and see when (if) a treatment occured.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/information.jl#L84-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TSCSMethods.window_distances!-NTuple{13, Any}" href="#TSCSMethods.window_distances!-NTuple{13, Any}"><code>TSCSMethods.window_distances!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Assign distances for each window. This could be massively simplified for a non-sliding window.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/human-nature-lab/TSCSMethods.jl/blob/8576979e7bbeb069d4eb304f0cf1cc59180b1883/src/distancing.jl#L118-L121">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../methodology/">« Methodology</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 20 August 2025 21:30">Wednesday 20 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
